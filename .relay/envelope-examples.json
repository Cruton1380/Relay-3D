{
  "description": "Example commit envelopes for all 7 commit classes",
  "examples": {
    "CELL_EDIT": {
      "description": "Single cell edit (e.g., prompt temperature 0.2 → 0.4)",
      "envelope": {
        "envelope_version": "1.0",
        "domain_id": "ai.prompt",
        "commit_class": "CELL_EDIT",
        "scope": {
          "scope_type": "repo",
          "repo_id": "customer-support__v1",
          "branch_id": "main",
          "bundle_id": null
        },
        "step": {
          "step_policy": "DENSE_SCOPE_STEP",
          "scope_step": 15,
          "time_hint_utc": "2026-01-26T21:44:12Z"
        },
        "actor": {
          "actor_id": "user_alice",
          "actor_kind": "human",
          "device_id": "dev_7c1"
        },
        "selection": {
          "selection_id": "sel:v1/customer-support__v1/main/15",
          "targets": [
            {
              "t": "CELL",
              "row_key": "prompt_12f3",
              "col_id": "temperature",
              "face": null,
              "step_range": null,
              "spatial": null
            }
          ]
        },
        "change": {
          "rows_touched": ["prompt_12f3"],
          "cells_touched": [
            {
              "row_key": "prompt_12f3",
              "col_id": "temperature",
              "before": 0.2,
              "after": 0.4,
              "edit_kind": "scalar",
              "sheet_view": "editing"
            }
          ],
          "files_written": ["prompts/prompt_12f3/parameters.yaml"],
          "derived_artifacts": [],
          "root_evidence_refs": []
        },
        "validation": {
          "schema_version": "domain-registry-v1",
          "hashes": {
            "envelope_sha256": "abc123...",
            "payload_manifest_sha256": "def456..."
          }
        }
      }
    },
    "FORMULA_EDIT": {
      "description": "Prompt text edit (formula-class)",
      "envelope": {
        "envelope_version": "1.0",
        "domain_id": "ai.prompt",
        "commit_class": "FORMULA_EDIT",
        "scope": {
          "scope_type": "repo",
          "repo_id": "customer-support__v1",
          "branch_id": "main",
          "bundle_id": null
        },
        "step": {
          "step_policy": "DENSE_SCOPE_STEP",
          "scope_step": 16,
          "time_hint_utc": "2026-01-26T22:00:00Z"
        },
        "actor": {
          "actor_id": "user_alice",
          "actor_kind": "human",
          "device_id": "dev_7c1"
        },
        "selection": {
          "selection_id": "sel:v1/customer-support__v1/main/16",
          "targets": [
            {
              "t": "CELL",
              "row_key": "prompt_12f3",
              "col_id": "prompt_text",
              "face": null,
              "step_range": null,
              "spatial": null
            }
          ]
        },
        "change": {
          "rows_touched": ["prompt_12f3"],
          "cells_touched": [],
          "files_written": ["prompts/prompt_12f3/text.md"],
          "derived_artifacts": [],
          "root_evidence_refs": [],
          "formula": {
            "row_key": "prompt_12f3",
            "formula_id": "prompt_text",
            "before_ref": "hash_of_old_text",
            "after_ref": "hash_of_new_text",
            "language": "prompt",
            "diff_summary": "Added multilingual support instructions"
          }
        },
        "validation": {
          "schema_version": "domain-registry-v1",
          "hashes": {
            "envelope_sha256": "ghi789...",
            "payload_manifest_sha256": "jkl012..."
          }
        }
      }
    },
    "ROW_CREATE": {
      "description": "Add new candidate to voting channel",
      "envelope": {
        "envelope_version": "1.0",
        "domain_id": "voting.channel",
        "commit_class": "ROW_CREATE",
        "scope": {
          "scope_type": "repo",
          "repo_id": "coffee-shop__seattle__downtown",
          "branch_id": "main",
          "bundle_id": null
        },
        "step": {
          "step_policy": "DENSE_SCOPE_STEP",
          "scope_step": 42,
          "time_hint_utc": "2026-01-26T22:15:00Z"
        },
        "actor": {
          "actor_id": "user_bob",
          "actor_kind": "human",
          "device_id": "dev_9d2"
        },
        "selection": {
          "selection_id": "sel:v1/coffee-shop__seattle__downtown/main/42",
          "targets": [
            {
              "t": "ROW",
              "row_key": "cand_9f8a",
              "col_id": null,
              "face": null,
              "step_range": null,
              "spatial": null
            }
          ]
        },
        "change": {
          "rows_touched": ["cand_9f8a"],
          "cells_touched": [],
          "files_written": ["candidates/cand_9f8a.yaml"],
          "derived_artifacts": [],
          "root_evidence_refs": [],
          "row_create": {
            "row_key": "cand_9f8a",
            "row_type": "candidate",
            "display_name": "Java Junction",
            "created_from": "seed",
            "source_ref": null
          }
        },
        "validation": {
          "schema_version": "domain-registry-v1",
          "hashes": {
            "envelope_sha256": "mno345...",
            "payload_manifest_sha256": "pqr678..."
          }
        }
      }
    },
    "ROW_ARCHIVE": {
      "description": "Archive candidate (status → archived)",
      "envelope": {
        "envelope_version": "1.0",
        "domain_id": "voting.channel",
        "commit_class": "ROW_ARCHIVE",
        "scope": {
          "scope_type": "repo",
          "repo_id": "coffee-shop__seattle__downtown",
          "branch_id": "main",
          "bundle_id": null
        },
        "step": {
          "step_policy": "DENSE_SCOPE_STEP",
          "scope_step": 43,
          "time_hint_utc": "2026-01-26T22:30:00Z"
        },
        "actor": {
          "actor_id": "moderator_carol",
          "actor_kind": "human",
          "device_id": "dev_3e4"
        },
        "selection": {
          "selection_id": "sel:v1/coffee-shop__seattle__downtown/main/43",
          "targets": [
            {
              "t": "ROW",
              "row_key": "cand_old123",
              "col_id": null,
              "face": null,
              "step_range": null,
              "spatial": null
            }
          ]
        },
        "change": {
          "rows_touched": ["cand_old123"],
          "cells_touched": [],
          "files_written": ["candidates/cand_old123.yaml"],
          "derived_artifacts": [],
          "root_evidence_refs": [],
          "row_archive": {
            "row_key": "cand_old123",
            "before_status": "active",
            "after_status": "archived",
            "reason": "Business closed",
            "replacement_row_key": null
          }
        },
        "validation": {
          "schema_version": "domain-registry-v1",
          "hashes": {
            "envelope_sha256": "stu901...",
            "payload_manifest_sha256": "vwx234..."
          }
        }
      }
    },
    "RANGE_EDIT": {
      "description": "Reorder storyboard frames",
      "envelope": {
        "envelope_version": "1.0",
        "domain_id": "media.storyboard",
        "commit_class": "RANGE_EDIT",
        "scope": {
          "scope_type": "branch",
          "repo_id": "product-launch-video__q3",
          "branch_id": "main",
          "bundle_id": null
        },
        "step": {
          "step_policy": "DENSE_SCOPE_STEP",
          "scope_step": 28,
          "time_hint_utc": "2026-01-26T23:00:00Z"
        },
        "actor": {
          "actor_id": "editor_dave",
          "actor_kind": "human",
          "device_id": "dev_5f6"
        },
        "selection": {
          "selection_id": "sel:v1/product-launch-video__q3/main/28",
          "targets": [
            {
              "t": "STEP_RANGE",
              "row_key": null,
              "col_id": null,
              "face": null,
              "step_range": "1..5",
              "spatial": null
            }
          ]
        },
        "change": {
          "rows_touched": ["seq_a", "seq_b", "seq_c"],
          "cells_touched": [],
          "files_written": ["state/frame_order.yaml"],
          "derived_artifacts": [],
          "root_evidence_refs": [],
          "range_edit": {
            "range_kind": "reorder",
            "targets": [
              { "row_key": "seq_a", "col_id": null },
              { "row_key": "seq_b", "col_id": null },
              { "row_key": "seq_c", "col_id": null }
            ],
            "reorder": {
              "before_order": ["seq_a", "seq_b", "seq_c"],
              "after_order": ["seq_b", "seq_a", "seq_c"]
            }
          }
        },
        "validation": {
          "schema_version": "domain-registry-v1",
          "hashes": {
            "envelope_sha256": "yz0123...",
            "payload_manifest_sha256": "abc456..."
          }
        }
      }
    },
    "ATTACHMENT_ADD": {
      "description": "Add root evidence document",
      "envelope": {
        "envelope_version": "1.0",
        "domain_id": "voting.channel",
        "commit_class": "ATTACHMENT_ADD",
        "scope": {
          "scope_type": "repo",
          "repo_id": "coffee-shop__seattle__downtown",
          "branch_id": "main",
          "bundle_id": null
        },
        "step": {
          "step_policy": "DENSE_SCOPE_STEP",
          "scope_step": 1,
          "time_hint_utc": "2026-01-26T10:00:00Z"
        },
        "actor": {
          "actor_id": "admin_eve",
          "actor_kind": "human",
          "device_id": "dev_7g8"
        },
        "selection": {
          "selection_id": "sel:v1/coffee-shop__seattle__downtown/main/1",
          "targets": [
            {
              "t": "FACE",
              "row_key": null,
              "col_id": null,
              "face": "minusZ",
              "step_range": null,
              "spatial": null
            }
          ]
        },
        "change": {
          "rows_touched": [],
          "cells_touched": [],
          "files_written": ["evidence/boundary_definition.geojson"],
          "derived_artifacts": [],
          "root_evidence_refs": ["evidence/boundary_definition.geojson"],
          "attachment": {
            "attachment_kind": "root_evidence",
            "path": "evidence/boundary_definition.geojson",
            "sha256": "def789abc012345678901234567890abcdef012345678901234567890abcd",
            "mime": "application/geo+json",
            "size_bytes": 4567,
            "linked_to": {
              "row_key": null,
              "scope_step": 0,
              "face": "minusZ"
            }
          }
        },
        "validation": {
          "schema_version": "domain-registry-v1",
          "hashes": {
            "envelope_sha256": "hij789...",
            "payload_manifest_sha256": "klm012..."
          }
        }
      }
    },
    "OPERATOR_RUN": {
      "description": "Run prompt evaluation",
      "envelope": {
        "envelope_version": "1.0",
        "domain_id": "ai.prompt",
        "commit_class": "OPERATOR_RUN",
        "scope": {
          "scope_type": "repo",
          "repo_id": "customer-support__v1",
          "branch_id": "main",
          "bundle_id": null
        },
        "step": {
          "step_policy": "DENSE_SCOPE_STEP",
          "scope_step": 17,
          "time_hint_utc": "2026-01-26T23:15:00Z"
        },
        "actor": {
          "actor_id": "eval_service",
          "actor_kind": "automation",
          "device_id": "service_eval_01"
        },
        "selection": {
          "selection_id": "sel:v1/customer-support__v1/main/17",
          "targets": [
            {
              "t": "ROW",
              "row_key": "prompt_12f3",
              "col_id": null,
              "face": null,
              "step_range": null,
              "spatial": null
            }
          ]
        },
        "change": {
          "rows_touched": ["prompt_12f3"],
          "cells_touched": [],
          "files_written": [],
          "derived_artifacts": ["derived/step-017/eval_results.json"],
          "root_evidence_refs": [],
          "operator": {
            "operator_id": "run_eval",
            "inputs": {
              "prompt_id": "prompt_12f3",
              "eval_suite": "standard_v1",
              "model": "gpt-4"
            },
            "outputs": {
              "quality_score": 92.5,
              "test_cases_passed": 18,
              "test_cases_total": 20,
              "derived_ref": "derived/step-017/eval_results.json"
            },
            "status": "success",
            "duration_ms": 4523
          }
        },
        "validation": {
          "schema_version": "domain-registry-v1",
          "hashes": {
            "envelope_sha256": "nop345...",
            "payload_manifest_sha256": "qrs678..."
          }
        }
      }
    }
  }
}

